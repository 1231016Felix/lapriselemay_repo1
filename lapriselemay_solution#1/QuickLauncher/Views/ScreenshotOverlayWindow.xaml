<Window x:Class="QuickLauncher.Views.ScreenshotOverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        Background="Transparent"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Cursor="Cross"
        KeyDown="Window_KeyDown"
        MouseLeftButtonDown="Canvas_MouseLeftButtonDown"
        MouseMove="Canvas_MouseMove"
        MouseLeftButtonUp="Canvas_MouseLeftButtonUp">
    <Grid>
        <!-- Screenshot capturé comme fond -->
        <Image x:Name="ScreenshotImage" Stretch="Fill" IsHitTestVisible="False"/>

        <!-- Overlay sombre avec trou pour la sélection -->
        <Path x:Name="DarkOverlay" Fill="#88000000" IsHitTestVisible="False"/>

        <!-- Canvas pour le rectangle de sélection et le label -->
        <Canvas x:Name="SelectionCanvas" IsHitTestVisible="False">
            <!-- Bordure de sélection -->
            <Border x:Name="SelectionBorder"
                    BorderBrush="White" BorderThickness="2"
                    Visibility="Collapsed" IsHitTestVisible="False">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="0" BlurRadius="4" Color="Black"/>
                </Border.Effect>
            </Border>

            <!-- Label dimensions -->
            <Border x:Name="SizeLabel" Background="#DD000000" CornerRadius="4"
                    Padding="8,4" Visibility="Collapsed" IsHitTestVisible="False">
                <TextBlock x:Name="SizeText" Foreground="White" FontSize="12" FontFamily="Consolas"/>
            </Border>
        </Canvas>

        <!-- Instructions -->
        <TextBlock x:Name="InstructionText"
                   Text="Cliquez et glissez pour sélectionner une zone • Échap pour annuler"
                   Foreground="White" FontSize="15" FontWeight="SemiBold"
                   HorizontalAlignment="Center" VerticalAlignment="Top"
                   Margin="0,40,0,0" IsHitTestVisible="False">
            <TextBlock.Effect>
                <DropShadowEffect ShadowDepth="1" BlurRadius="4" Color="Black"/>
            </TextBlock.Effect>
        </TextBlock>
    </Grid>
</Window>
